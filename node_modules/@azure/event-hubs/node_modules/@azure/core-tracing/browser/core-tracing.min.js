!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(((t=t||self).Azure=t.Azure||{},t.Azure.Core=t.Azure.Core||{},t.Azure.Core.Tracing={}))}(this,function(t){"use strict";var n,e=function(){function t(){}return t.prototype.context=function(){return{spanId:"",traceId:""}},t.prototype.end=function(t){},t.prototype.setAttribute=function(t,n){return this},t.prototype.setAttributes=function(t){return this},t.prototype.addEvent=function(t,n){return this},t.prototype.addLink=function(t,n){return this},t.prototype.setStatus=function(t){return this},t.prototype.updateName=function(t){return this},t.prototype.isRecordingEvents=function(){return!1},t}(),r=function(){function t(){}return t.prototype.toBytes=function(t){return new ArrayBuffer(0)},t.prototype.fromBytes=function(t){return null},t}(),o=function(){function t(){}return t.prototype.inject=function(t,n,e){},t.prototype.extract=function(t,n){return null},t}(),p=function(){function t(){}return t.prototype.startSpan=function(t,n){return new e},t.prototype.getCurrentSpan=function(){return new e},t.prototype.withSpan=function(t,n){return n()},t.prototype.bind=function(t,n){return t},t.prototype.recordSpanData=function(t){},t.prototype.getBinaryFormat=function(){return new r},t.prototype.getHttpTextFormat=function(){return new o},t}();var a=function(){function t(t){this._state=t}return t.prototype.get=function(t){throw new Error("Method not implemented.")},t.prototype.set=function(t,n){throw new Error("Method not implemented.")},t.prototype.unset=function(t){throw new Error("Method not implemented")},t.prototype.serialize=function(){return this._state||""},t}();var i,u=function(){function t(t,n,e){if(void 0===n&&(n=""),void 0===e&&(e={}),function(t){return void 0!==t.getWrappedTracer}(t)){var r=(o=e.parent)&&void 0!==o.getWrappedSpan?e.parent.getWrappedSpan():void 0;this._span=t.getWrappedTracer().startChildSpan({name:n,childOf:r}),this._span.start()}else this._span=t;var o}return t.prototype.getWrappedSpan=function(){return this._span},t.prototype.end=function(t){this._span.end()},t.prototype.context=function(){var t=this._span.spanContext;return{spanId:t.spanId,traceId:t.traceId,traceFlags:t.options,traceState:new a(t.traceState)}},t.prototype.setAttribute=function(t,n){return this._span.addAttribute(t,n),this},t.prototype.setAttributes=function(t){return this._span.attributes=t,this},t.prototype.addEvent=function(t,n){throw new Error("Method not implemented.")},t.prototype.addLink=function(t,n){return this._span.addLink(t.traceId,t.spanId,0,n),this},t.prototype.setStatus=function(t){return this._span.setStatus(t.code,t.message),this},t.prototype.updateName=function(t){return this._span.name=t,this},t.prototype.isRecordingEvents=function(){return!!this._span.traceId},t}(),s=function(){function t(t){this._tracer=t}return t.prototype.getWrappedTracer=function(){return this._tracer},t.prototype.startSpan=function(t,n){return new u(this,t,n)},t.prototype.getCurrentSpan=function(){return null},t.prototype.withSpan=function(t,n){throw new Error("Method not implemented.")},t.prototype.bind=function(t,n){throw new Error("Method not implemented.")},t.prototype.recordSpanData=function(t){throw new Error("Method not implemented.")},t.prototype.getBinaryFormat=function(){throw new Error("Method not implemented.")},t.prototype.getHttpTextFormat=function(){throw new Error("Method not implemented.")},t}(),c=function(t,n){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function d(t,n){function e(){this.constructor=t}c(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}(i=t.CanonicalCode||(t.CanonicalCode={}))[i.OK=0]="OK",i[i.CANCELLED=1]="CANCELLED",i[i.UNKNOWN=2]="UNKNOWN",i[i.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",i[i.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",i[i.NOT_FOUND=5]="NOT_FOUND",i[i.ALREADY_EXISTS=6]="ALREADY_EXISTS",i[i.PERMISSION_DENIED=7]="PERMISSION_DENIED",i[i.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",i[i.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",i[i.ABORTED=10]="ABORTED",i[i.OUT_OF_RANGE=11]="OUT_OF_RANGE",i[i.UNIMPLEMENTED=12]="UNIMPLEMENTED",i[i.INTERNAL=13]="INTERNAL",i[i.UNAVAILABLE=14]="UNAVAILABLE",i[i.DATA_LOSS=15]="DATA_LOSS",i[i.UNAUTHENTICATED=16]="UNAUTHENTICATED";var f,h=function(n){function e(e,r,o,p,a,i){void 0===i&&(i=Date.now());var u=n.call(this)||this;return u._tracer=e,u.name=r,u.kind=p,u.startTime=i,u.parentSpanId=a,u.status={code:t.CanonicalCode.OK},u.endCalled=!1,u._context=o,u}return d(e,n),e.prototype.tracer=function(){return this._tracer},e.prototype.context=function(){return this._context},e.prototype.end=function(t){this.endCalled=!0},e.prototype.setStatus=function(t){return this.status=t,this},e.prototype.isRecordingEvents=function(){return!0},e}(e);(f=t.SpanKind||(t.SpanKind={}))[f.INTERNAL=0]="INTERNAL",f[f.SERVER=1]="SERVER",f[f.CLIENT=2]="CLIENT",f[f.PRODUCER=3]="PRODUCER",f[f.CONSUMER=4]="CONSUMER";var E,S=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.traceIdCounter=0,t.spanIdCounter=0,t.rootSpans=[],t.knownSpans=[],t}return d(e,n),e.prototype.getNextTraceId=function(){return this.traceIdCounter++,String(this.traceIdCounter)},e.prototype.getNextSpanId=function(){return this.spanIdCounter++,String(this.spanIdCounter)},e.prototype.getRootSpans=function(){return this.rootSpans},e.prototype.getKnownSpans=function(){return this.knownSpans},e.prototype.getActiveSpans=function(){return this.knownSpans.filter(function(t){return!t.endCalled})},e.prototype.getSpanGraph=function(t){for(var n=this.knownSpans.filter(function(n){return n.context().traceId===t}),e=[],r=new Map,o=0,p=n;o<p.length;o++){var a=p[o],i=a.context().spanId,u={name:a.name,children:[]};if(r.set(i,u),a.parentSpanId){var s=r.get(a.parentSpanId);if(!s)throw new Error("Span with name "+u.name+" has an unknown parentSpan with id "+a.parentSpanId);s.children.push(u)}else e.push(u)}return{roots:e}},e.prototype.startSpan=function(n,e){void 0===e&&(e={});var r,o=this._getParentContext(e),p=!1;o&&o.traceId?r=o.traceId:(r=this.getNextTraceId(),p=!0);var a={traceId:r,spanId:this.getNextSpanId()},i=new h(this,n,a,e.kind||t.SpanKind.INTERNAL,o?o.spanId:void 0,e.startTime);return this.knownSpans.push(i),p&&this.rootSpans.push(i),i},e.prototype._getParentContext=function(t){var n=t.parent;if(n)return"traceId"in n?n:n.context()},e}(p);(E=t.TraceFlags||(t.TraceFlags={}))[E.UNSAMPLED=0]="UNSAMPLED",E[E.SAMPLED=1]="SAMPLED";var I="00";t.NoOpSpan=e,t.NoOpTracer=p,t.OpenCensusSpanWrapper=u,t.OpenCensusTracerWrapper=s,t.TestSpan=h,t.TestTracer=S,t.extractSpanContextFromTraceParentHeader=function(t){var n=t.split("-");if(4===n.length){var e=n[0],r=n[1],o=n[2],p=n[3];if(e===I)return{spanId:o,traceId:r,traceFlags:parseInt(p,16)}}},t.getTraceParentHeader=function(n){var e=[];if(n.traceId||e.push("traceId"),n.spanId||e.push("spanId"),!e.length){var r=(n.traceFlags||t.TraceFlags.UNSAMPLED).toString(16),o=1===r.length?"0"+r:r;return I+"-"+n.traceId+"-"+n.spanId+"-"+o}},t.getTracer=function(){return n||(n=new p),n},t.setTracer=function(t){n=t},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=core-tracing.min.js.map
